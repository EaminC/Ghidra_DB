{"src_id":"s745947670","tgt_id":"s841869061","src_agg_runtime":0.120797927,"tgt_agg_runtime":0.0970913987,"problem_id":"p02587","speedup":1.2441671311,"src_code":"#include <iostream>\n\n#include <string>\n\n#include <cstdlib>\n\n#include <cmath>\n\n#include <vector>\n\n#include <unordered_map>\n\n#include <map>\n\n#include <set>\n\n#include <algorithm>\n\n#include <queue>\n\n#include <stack>\n\n#include <functional>\n\n#include <bitset>\n\n#include <assert.h>\n\n#include <unordered_map>\n\n#include <fstream>\n\n#include <ctime>\n\n#include <complex>\n\nusing namespace std;\n\ntypedef long long ll;\n\ntypedef vector<ll> vl;\n\ntypedef vector<vl> vvl;\n\ntypedef vector<char> vc;\n\ntypedef vector<string> vs;\n\ntypedef vector<bool> vb;\n\ntypedef vector<double> vd;\n\ntypedef pair<ll,ll> P;\n\ntypedef pair<int,int> pii;\n\ntypedef vector<P> vpl;\n\ntypedef tuple<ll,ll,ll> tapu;\n\n#define rep(i,n) for(int i=0; i<(n); i++)\n\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n\n#define all(x) (x).begin(), (x).end()\n\n#define rall(x) (x).rbegin(), (x).rend()\n\nconst int inf = 1<<30;\n\nconst ll linf = 1LL<<62;\n\nconst int MAX = 510000;\n\nll dy[8] = {1,-1,0,0,1,-1,1,-1};\n\nll dx[8] = {0,0,1,-1,1,-1,-1,1};\n\nconst double pi = acos(-1);\n\nconst double eps = 1e-7;\n\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\n\tif(a>b){\n\n\t\ta = b; return true;\n\n\t}\n\n\telse return false;\n\n}\n\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\n\tif(a<b){\n\n\t\ta = b; return true;\n\n\t}\n\n\telse return false;\n\n}\n\ntemplate<typename T> inline void print(T &a){\n\n    rep(i,a.size()) cout << a[i] << \" \";\n\n    cout << \"\\n\";\n\n}\n\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\n\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n\n}\n\nll pcount(ll x) {return __builtin_popcountll(x);}\n\nconst int mod = 1e9 + 7;\n\n\/\/const int mod = 998244353;\n\n\n\nstruct state{\n\n\tstring s;\n\n\tll cost;\n\n\tint d;\n\n\tbool operator< (const state &st) const {\n\n\t\treturn cost > st.cost;\n\n\t}\n\n};\n\n\n\nmap<pair<string,int>,ll> mp;\n\n\n\nvoid ins(string s, ll c, int d){\n\n\tif(mp.find({s,d}) != mp.end()){\n\n\t\tchmin(mp[{s,d}], c);\n\n\t}else{\n\n\t\tmp[{s,d}] = c;\n\n\t}\n\n}\n\n\n\nint main(){\n\n\tint n; cin >> n;\n\n\tvl c(n);\n\n\tvs s(n);\n\n\trep(i,2) mp[{\"\",i}] = linf;\n\n\trep(i,n){\n\n\t\tcin >> s[i] >> c[i];\n\n\t\tint m = s[i].size();\n\n\t\trep(j,26){\n\n\t\t\ts[i].push_back((char)('a'+j));\n\n\t\t\tins(s[i],c[i],0);\n\n\t\t\treverse(all(s[i]));\n\n\t\t\tins(s[i],c[i],1);\n\n\t\t\treverse(all(s[i]));\n\n\t\t\ts[i].pop_back();\n\n\t\t}\n\n\t\trep(j,m){\n\n\t\t\tstring t = s[i].substr(0,j);\n\n\t\t\tstring u = t; reverse(all(u));\n\n\t\t\tif(t == u){\n\n\t\t\t\tstring v = s[i].substr(j,m-j);\n\n\t\t\t\tins(v,c[i],0);\n\n\t\t\t}\n\n\t\t}\n\n\t\trep(j,m){\n\n\t\t\tstring t = s[i].substr(j,s[i].size()-j);\n\n\t\t\tstring u = t; reverse(all(u));\n\n\t\t\tif(t == u){\n\n\t\t\t\tstring v = s[i].substr(0,j);\n\n\t\t\t\treverse(all(v));\n\n\t\t\t\tins(v,c[i],1);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpriority_queue<state> pq;\n\n\tauto push = [&](string s, ll c, int d){\n\n\t\tstate st;\n\n\t\tst.s = s; st.cost = c; st.d = d;\n\n\t\tif(mp.find({s,d}) != mp.end()){\n\n\t\t\tif(mp[{s,d}] > c){\n\n\t\t\t\tmp[{s,d}] = c;\n\n\t\t\t\tpq.emplace(st);\n\n\t\t\t}\n\n\t\t}else{\n\n\t\t\tmp[{s,d}] = c;\n\n\t\t\tpq.emplace(st);\n\n\t\t}\n\n\t};\n\n\tfor(auto i : mp){\n\n\t\tstate st;\n\n\t\tst.s = i.first.first; st.cost = i.second;\n\n\t\tst.d = i.first.second;\n\n\t\tpq.emplace(st);\n\n\t}\n\n\twhile(!pq.empty()){\n\n\t\tauto p = pq.top(); pq.pop();\n\n\t\tif(mp[{p.s,p.d}] < p.cost) continue;\n\n\t\trep(i,n){\n\n\t\t\tif(p.d == 0){\n\n\t\t\t\treverse(all(s[i]));\n\n\t\t\t\tint si = s[i].size(), sp = p.s.size();\n\n\t\t\t\tif(si < sp){\n\n\t\t\t\t\tstring t = p.s.substr(0,si);\n\n\t\t\t\t\tif(t == s[i]){\n\n\t\t\t\t\t\tpush(p.s.substr(si,sp-si), p.cost+c[i], p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\n\t\t\t\t\tstring t = s[i].substr(0,sp);\n\n\t\t\t\t\tif(t == p.s){\n\n\t\t\t\t\t\tpush(s[i].substr(sp,si-sp), p.cost+c[i], 1-p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treverse(all(s[i]));\n\n\t\t\t}else{\n\n\t\t\t\tint si = s[i].size(), sp = p.s.size();\n\n\t\t\t\tif(si < sp){\n\n\t\t\t\t\tstring t = p.s.substr(0,si);\n\n\t\t\t\t\tif(t == s[i]){\n\n\t\t\t\t\t\tpush(p.s.substr(si,sp-si), p.cost+c[i], p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\n\t\t\t\t\tstring t = s[i].substr(0,sp);\n\n\t\t\t\t\tif(t == p.s){\n\n\t\t\t\t\t\tpush(s[i].substr(sp,si-sp), p.cost+c[i], 1-p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tll ans = min(mp[{\"\",0}], mp[{\"\",1}]);\n\n\tif(ans == linf) cout << -1 << endl;\n\n\telse cout << ans << \"\\n\";\n\n}","tgt_code":"#include <iostream>\n\n#include <string>\n\n#include <cstdlib>\n\n#include <cmath>\n\n#include <vector>\n\n#include <unordered_map>\n\n#include <map>\n\n#include <set>\n\n#include <algorithm>\n\n#include <queue>\n\n#include <stack>\n\n#include <functional>\n\n#include <bitset>\n\n#include <assert.h>\n\n#include <unordered_map>\n\n#include <fstream>\n\n#include <ctime>\n\n#include <complex>\n\nusing namespace std;\n\ntypedef long long ll;\n\ntypedef vector<ll> vl;\n\ntypedef vector<vl> vvl;\n\ntypedef vector<char> vc;\n\ntypedef vector<string> vs;\n\ntypedef vector<bool> vb;\n\ntypedef vector<double> vd;\n\ntypedef pair<ll,ll> P;\n\ntypedef pair<int,int> pii;\n\ntypedef vector<P> vpl;\n\ntypedef tuple<ll,ll,ll> tapu;\n\n#define rep(i,n) for(int i=0; i<(n); i++)\n\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n\n#define all(x) (x).begin(), (x).end()\n\n#define rall(x) (x).rbegin(), (x).rend()\n\nconst int inf = 1<<30;\n\nconst ll linf = 1LL<<62;\n\nconst int MAX = 510000;\n\nll dy[8] = {1,-1,0,0,1,-1,1,-1};\n\nll dx[8] = {0,0,1,-1,1,-1,-1,1};\n\nconst double pi = acos(-1);\n\nconst double eps = 1e-7;\n\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\n\tif(a>b){\n\n\t\ta = b; return true;\n\n\t}\n\n\telse return false;\n\n}\n\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\n\tif(a<b){\n\n\t\ta = b; return true;\n\n\t}\n\n\telse return false;\n\n}\n\ntemplate<typename T> inline void print(T &a){\n\n    rep(i,a.size()) cout << a[i] << \" \";\n\n    cout << \"\\n\";\n\n}\n\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\n\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n\n}\n\nll pcount(ll x) {return __builtin_popcountll(x);}\n\nconst int mod = 1e9 + 7;\n\n\/\/const int mod = 998244353;\n\n\n\nstruct state{\n\n\tstring s;\n\n\tll cost;\n\n\tint d;\n\n\tbool operator< (const state &st) const {\n\n\t\treturn cost > st.cost;\n\n\t}\n\n};\n\n\n\nmap<pair<string,int>,ll> mp;\n\n\n\nvoid ins(string s, ll c, int d){\n\n\tif(mp.find({s,d}) != mp.end()){\n\n\t\tchmin(mp[{s,d}], c);\n\n\t}else{\n\n\t\tmp[{s,d}] = c;\n\n\t}\n\n}\n\n\n\nint main(){\n\n\tint n; cin >> n;\n\n\tvl c(n);\n\n\tvs s(n);\n\n\trep(i,2) mp[{\"\",i}] = linf;\n\n\trep(i,n){\n\n\t\tcin >> s[i] >> c[i];\n\n\t\tint m = s[i].size();\n\n\t\trep(j,m){\n\n\t\t\tstring t = s[i].substr(0,j);\n\n\t\t\tstring u = t; reverse(all(u));\n\n\t\t\tif(t == u){\n\n\t\t\t\tstring v = s[i].substr(j,m-j);\n\n\t\t\t\tins(v,c[i],0);\n\n\t\t\t}\n\n\t\t}\n\n\t\trep(j,m){\n\n\t\t\tstring t = s[i].substr(j,s[i].size()-j);\n\n\t\t\tstring u = t; reverse(all(u));\n\n\t\t\tif(t == u){\n\n\t\t\t\tstring v = s[i].substr(0,j);\n\n\t\t\t\treverse(all(v));\n\n\t\t\t\tins(v,c[i],1);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpriority_queue<state> pq;\n\n\tauto push = [&](string s, ll c, int d){\n\n\t\tstate st;\n\n\t\tst.s = s; st.cost = c; st.d = d;\n\n\t\tif(mp.find({s,d}) != mp.end()){\n\n\t\t\tif(mp[{s,d}] > c){\n\n\t\t\t\tmp[{s,d}] = c;\n\n\t\t\t\tpq.emplace(st);\n\n\t\t\t}\n\n\t\t}else{\n\n\t\t\tmp[{s,d}] = c;\n\n\t\t\tpq.emplace(st);\n\n\t\t}\n\n\t};\n\n\tfor(auto i : mp){\n\n\t\tstate st;\n\n\t\tst.s = i.first.first; st.cost = i.second;\n\n\t\tst.d = i.first.second;\n\n\t\tpq.emplace(st);\n\n\t}\n\n\twhile(!pq.empty()){\n\n\t\tauto p = pq.top(); pq.pop();\n\n\t\tif(mp[{p.s,p.d}] < p.cost) continue;\n\n\t\trep(i,n){\n\n\t\t\tif(p.d == 0){\n\n\t\t\t\treverse(all(s[i]));\n\n\t\t\t\tint si = s[i].size(), sp = p.s.size();\n\n\t\t\t\tif(si < sp){\n\n\t\t\t\t\tstring t = p.s.substr(0,si);\n\n\t\t\t\t\tif(t == s[i]){\n\n\t\t\t\t\t\tpush(p.s.substr(si,sp-si), p.cost+c[i], p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\n\t\t\t\t\tstring t = s[i].substr(0,sp);\n\n\t\t\t\t\tif(t == p.s){\n\n\t\t\t\t\t\tpush(s[i].substr(sp,si-sp), p.cost+c[i], 1-p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treverse(all(s[i]));\n\n\t\t\t}else{\n\n\t\t\t\tint si = s[i].size(), sp = p.s.size();\n\n\t\t\t\tif(si < sp){\n\n\t\t\t\t\tstring t = p.s.substr(0,si);\n\n\t\t\t\t\tif(t == s[i]){\n\n\t\t\t\t\t\tpush(p.s.substr(si,sp-si), p.cost+c[i], p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\n\t\t\t\t\tstring t = s[i].substr(0,sp);\n\n\t\t\t\t\tif(t == p.s){\n\n\t\t\t\t\t\tpush(s[i].substr(sp,si-sp), p.cost+c[i], 1-p.d);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tll ans = min(mp[{\"\",0}], mp[{\"\",1}]);\n\n\tif(ans == linf) cout << -1 << endl;\n\n\telse cout << ans << \"\\n\";\n\n}","fastest_agg_runtime":0.087739763,"target_reward":0.9036821402,"src_reward":0.7171156957,"src_status":"Accepted","tgt_status":"Accepted","fastest_agg_runtime_updated":0.087739763,"target_reward_updated":0.9036821402,"src_reward_updated":0.7171156957,"target_reward_updated_pct_bin":3,"src_reward_updated_pct_bin":2}